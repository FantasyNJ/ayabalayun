"use strict";$(function(){function n(){r.children("li").width($(document).width()),r.width($(document).width()*a),r.css("left",-e*$(document).width()),t()}function t(){clearInterval(i);var n=$(document).width();i=setInterval(function(){e++,e%=a,r.animate({left:-e*n},400,function(){e===a-1&&(r.css("left",0),e=0)})},3e3)}var r=$(".m-banner"),a=r.children("li").length,e=0,i=null;n(),$(window).resize(function(){n()})}),$(function(){var n=$(".m-login-reg-list"),t=$(".g-login-reg-wrap"),r=n.find("li"),a=t.children(),e=$(".g-reg-wrap .prompt"),i=$(".g-login-reg-wrap"),s=i.find("input"),o=$(".g-reg-wrap").find('input[name="username"]'),c=$(".g-reg-wrap").find('input[name="password"]'),l=$(".g-reg-wrap").find('input[name="repassword"]');r.click(function(){r.removeClass("on"),a.hide(),$(this).addClass("on"),a.eq($(this).index(r)).show(),s.val("").attr("class",""),$(".m-login-reg .prompt").text("")}),s.focus(function(){s.removeClass("inp-focus"),$(this).addClass("inp-focus")}),s.blur(function(){""!==$(this).val().trim()?$(this).attr("class",""):$(this).attr("class","inp-warn")}),s.on("input",function(){""!==$(this).val().trim()?$(this).attr("class",""):$(this).attr("class","inp-warn")}),o.blur(function(){$.ajax({type:"GET",url:"/api/user/checkUserName",data:{username:$(this).val().trim()},success:function(n){e.text(n.message),n.code?(o.attr("class","inp-warn"),e.css("color","red")):(s.attr("class",""),e.css("color","green"))}})}),l.blur(function(){$(this).val()!==c.val()&&($(this).attr("class","inp-warn"),c.attr("class","inp-warn"))})}),$(function(){var n=$('.g-reg-wrap [name="username"]'),t=$('.g-reg-wrap [name="password"]'),r=$('.g-reg-wrap [name="repassword"]'),a=($(".g-reg-wrap .btn"),$(".g-reg-wrap .prompt")),e=$(".g-reg-wrap form");e.on("submit",function(){return $.ajax({type:"POST",url:"/api/user/register",data:{username:n.val().trim(),password:t.val().trim(),repassword:r.val().trim()},dataType:"json",success:function(n){a.text(n.message),n.code?a.css("color","red"):(a.css("color","green"),e[0].reset())}}),!1})}),$(function(){var n=$('.g-login-wrap [name="username"]'),t=$('.g-login-wrap [name="password"]'),r=($(".g-login-wrap .btn"),$(".g-login-wrap .prompt")),a=$(".g-login-wrap form");a.on("submit",function(){return $.ajax({type:"POST",url:"/api/user/login",data:{username:n.val().trim(),password:t.val().trim()},dataType:"json",success:function(n){r.text(n.message),n.code?r.css("color","red"):(r.css("color","green"),setTimeout(function(){window.location.href="/disk"},1e3))}}),!1})}),$(function(){function n(){t.each(function(n,r){var a=$(window).scrollTop()+$(window).height();a>$(r).offset().top+30&&($(r).trigger("diyShow"),n===t.length-1&&$(window).unbind("scroll"))})}var t=($(".g-desc"),$(".m-detail"));t.on("diyShow",function(){$(this).find(".pl").animate({left:0,opacity:1},700),$(this).find(".pr").animate({top:0,opacity:1},700)}),n(),$(window).scroll(n)});